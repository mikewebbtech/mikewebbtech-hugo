<!--
//
//  PAGINATION
//––––––––––––––––––––––––––––––––––––––––––––––––––
-->
<!-- {{ template "_internal/pagination.html" . }} -->

{{ $paginator := .Paginator }} {{ $adjacent_links := 2 }} {{ $max_links := (add
(mul $adjacent_links 2) 1) }}
<!-- ($adjacent_links * 2) + 1 -->
{{ $lower_limit := (add $adjacent_links 1) }} {{ $upper_limit := (sub
$paginator.TotalPages $adjacent_links) }} {{ if gt $paginator.TotalPages 1 }}
<nav class="pagination-buttons">
  <ul class="pagination_list">
    <!-- First page. -->
    {{ if and (ne $paginator.PageNumber 1) (gt $paginator.TotalPages $max_links)
    }}
    <li class="button previous">
      <a class="button-text" href="{{ $paginator.First.URL }}">First</a>
    </li>
    {{ end }}

    <!-- Previous page. -->
    {{ if $paginator.HasPrev }}
    <li class="button previous">
      <a class="button-text" href="{{ $paginator.Prev.URL }}">←</a>
    </li>
    {{ end }}

    <!-- Page numbers. -->
    {{ range $paginator.Pagers }}

    <!-- Page number flag. -->
    {{ $.Scratch.Set "page_number_flag" false }}

    <!-- Complex pagination. -->
    <!-- If there are more pages than the max page numbers allowed. -->
    {{ if gt $paginator.TotalPages $max_links }}

    <!-- Lower limit pages. -->
    <!-- If the user is on a page which is in the lower limit.  -->
    {{ if le $paginator.PageNumber $lower_limit }}

    <!-- If the current loop page is less than max_links. -->
    {{ if le .PageNumber $max_links }} {{ $.Scratch.Set "page_number_flag"
    true}} {{ end }}

    <!-- Upper limit pages. -->
    <!-- If the user is on a page which is in the upper limit. -->
    {{ else if ge $paginator.PageNumber $upper_limit }}

    <!-- If the current loop page is greater than total pages minus $max_links -->
    {{ if gt .PageNumber (sub $paginator.TotalPages $max_links) }} {{
    $.Scratch.Set "page_number_flag" true }} {{ end }}

    <!-- Middle pages. -->
    {{ else }} {{ if and (ge .PageNumber (sub $paginator.PageNumber
    $adjacent_links)) (le .PageNumber (add $paginator.PageNumber
    $adjacent_links)) }} {{ $.Scratch.Set "page_number_flag" true }} {{ end }}
    {{ end }}

    <!-- Simple pagination. -->
    {{ else }} {{ $.Scratch.Set "page_number_flag" true }} {{ end }}

    <!-- If a page number link should be drawn. -->
    {{ if eq ($.Scratch.Get "page_number_flag") true }}
    <li class="button">
      <a href="{{ .URL }}"> {{ .PageNumber }} </a>
    </li>
    {{ end }} {{ end }}
    <!-- end of range -->

    <!-- Next page. -->
    {{ if $paginator.HasNext }}
    <li class="button next">
      <a class="button-text" href="{{ $paginator.Next.URL }}">→</a>
    </li>
    {{ end }}

    <!-- Last page. -->
    {{ if and (ne $paginator.PageNumber $paginator.TotalPages) (gt
    $paginator.TotalPages $max_links) }}
    <li class="button next">
      <a class="button-text" href="{{ $paginator.Last.URL }}">Last</a>
    </li>
    {{ end }}
  </ul>
  <!-- .pagination__list -->
</nav>
<!-- .pagination -->
{{ end }}
